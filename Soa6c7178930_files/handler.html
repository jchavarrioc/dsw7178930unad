<!DOCTYPE html>
<!-- saved from url=(0090)https://jchavarrioc.wixsite.com/_partials/ding-dashboard-statics/1.100.0/asdk/handler.html -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<style type="text/css">#dpmaxz_fbm_gui *, #dpmaxz_fbm_gui *:after, #dpmaxz_fbm_gui *:before,#dpmaxz_fbi_root *, #dpmaxz_fbi_root *:after, #dpmaxz_fbi_root *:before{margin: 0;padding: 0;box-sizing: content-box; width: auto;}.dpmaxz_hidden {visibility: hidden;}#dpmaxz_fbm_gui {position: static; -moz-user-select: none;-webkit-user-select: none; margin: 0;padding: 0;cursor: default;}#dpmaxz_fbi_root {-webkit-user-select: none; position: relative; display: inline-block; z-index: 2147483646; margin: 0;padding: 0;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg { display: block;position: absolute;cursor: default;width: 50px;height: 24px;background: transparent url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/mainbkg.png) no-repeat;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg .dpmaxz_fbi_fbishield {float: left;margin: -16px 0 0 3px;  padding: 0;background: transparent url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/mainimg.png) no-repeat;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg .dpmaxz_fbi_authok {background: transparent url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/mainimg_ok.png) no-repeat;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg .dpmaxz_fbi_authno {background: transparent url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/mainimg_no.png) no-repeat;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg .dpmaxz_fbi_xchg {background: transparent url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/mainxchg.png) no-repeat;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg .dpmaxz_fbi_menuact {background: transparent url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/mainmact.png) no-repeat;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg .dpmaxz_fbi_add {height: 16px;width: 15px;float: right;background: transparent url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/mainadd.png) no-repeat;margin: 0 -16px 0 0;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus {position: absolute; z-index: 2147483647;}.dpmaxz_fbm_menusrel {position: relative;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus ul {position: absolute; left: 0;top: 22px; list-style: none;white-space: nowrap;border: 1px solid #a0a0a0;background-image: -moz-linear-gradient(top, rgb(240,245,255) 73%, white 100%); background-image: -webkit-linear-gradient(top, rgb(240,245,255) 73%, white 100%);box-shadow: 4px 4px 4px -3px #605F70;font-family: 'Segoe UI',Verdana,Arial;font-style: normal;font-size: 1em;padding: 3px 3px;margin: 2px 4px 2px 4px;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus ul li {text-decoration: none;text-align: left;margin: 0; padding: 0;list-style: none;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus ul li:hover {border: 1px solid #aecff7;-webkit-border-radius: 4px;background-color: #edf1f6;margin: -1px;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus .dpmaxz_fbm_row {position: relative;color: black;height: 22px;line-height: 22px;vertical-align: middle;float: none;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus .dpmaxz_fbm_row span {display: inline-block !important;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus .dpmaxz_fbm_rowicon {display: inline-block;width: 26px;height: 22px;position: relative;vertical-align: top;border-right: 1px solid #e2e3e3;font-size: 12px; color: black;}#dpmaxz_fbm_gui .dpmaxz_fbm_menus .dpmaxz_fbm_rowtext {display: inline-block;border-left: 1px solid #ffffff;padding: 0 4px;font: normal 1em 'Segoe UI',Verdana,Arial; font-size: 12px;}.dpmaxz_highlight {border-image: url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/highlighter.png) 5 9 8 6 repeat;border-style: solid;}#dpmaxz_fbi_root .dpmaxz_fbi_mainbkg .dpmaxz_fbi_fbishield {width: 32px; height: 37px;}.dpmaxz_cf:after {clear: both;content: '.';display: block;font-size: 0;height: 0;line-height: 0;visibility: hidden;}.dpmaxz_hide {display: none;}#dpmaxz_all div {margin: 0;padding: 0;display: block; white-space: normal; text-align: left; }#dpmaxz_all *, #dpmaxz_all *:after, #dpmaxz_all *:before{margin: 0;padding: 0;box-sizing: content-box; width: auto;}#dpmaxz_all {position:fixed;z-index:2147483646;-webkit-user-select: none; cursor: default;transition: visibility .2s cubic-bezier(0, 0, 0, 1.21),opacity .2s cubic-bezier(0, 0, 0, 1.21);}.dpmaxz_all_hidden {visibility: hidden;opacity: 0;}.dpmaxz_fbb_shadowframe {position:relative;}.dpmaxz_fbb_caption {position:relative;}.dpmaxz_fbb_mainimg {float: left;}.dpmaxz_float_right {float: right;}#dpmaxz_all * {box-sizing: content-box;}#dpmaxz_all input[type='button']{width: auto; height: auto;min-width: auto; }#dpmaxz_all input[type='checkbox']{margin: 0;width: auto;        height: auto;       opacity: 1;         float: none;        position: static;}#dpmaxz_all {right: 380px;top: 10px;}#dpmaxz_all .dpmaxz_fbb_shadowframe {width:370px;background: url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/bar-bkg.png) repeat scroll 0 0;background-size: 100% 100%; background-color: #f9f9f9;border: 1px solid #bebebe;border-radius: 3px;box-shadow: 2px 2px 2px rgba(0, 0, 0, 0.1);}#dpmaxz_all #dpmaxz_cap {margin-left: 10px;vertical-align:top;}#dpmaxz_all .dpmaxz_fbb_caption {height: 34px;padding: 12px 0 0 18px;font: normal normal bold 15px/26px 'Helvetica Neue',Helvetica,Arial,sans-serif;background-color: rgba(184, 184, 184, 0.3);color:#5f5f5f;}#dpmaxz_all .dpmaxz_fbb_mainbody {padding: 16px 12px 14px;}#dpmaxz_all .dpmaxz_fbb_maintext {margin-left:60px;font: normal normal normal 12px/18px 'Helvetica Neue',Helvetica,Arial,sans-serif;color: #414141;}#dpmaxz_all .dpmaxz_btn_wrap {margin-top:20px;}#dpmaxz_all input[type='button'].dpmaxz_fbb_btn {line-height: normal;overflow: visible;cursor: pointer;text-align: center;vertical-align: middle;text-decoration: none;transition: all .2s ease 0;font:normal 12px/18px 'Helvetica Neue',Helvetica,Arial,sans-serif;letter-spacing: 0.03em; border: 1px solid #aaa;border-radius: 2px;}#dpmaxz_all input[type='button'].dpmaxz_fbb_btn:hover, #dpmaxz_all input[type='button'].dpmaxz_fbb_btn:focus {color: #212121;border: 1px solid #999;background-color: #fff;border-color: #8b8b8b;box-shadow: 1px 1px 2px 2px rgba(119, 119, 119, 0.23);}#dpmaxz_all input[type='button'].dpmaxz_fbb_btn:hover:disabled{box-shadow:none}#dpmaxz_all input[type='button'].dpmaxz_fbb_mbtn {position: relative;display: inline-block;padding: 8px 15px;color: #000;background-color:#f8f8f8;}#dpmaxz_all input[type='button'].dpmaxz_fbb_mbtn:hover, #dpmaxz_all input[type='button'].dpmaxz_fbb_mbtn:focus {}#dpmaxz_all input[type='button'].dpmaxz_fbb_mbtn:active {box-shadow: none;}#dpmaxz_all input[type='button'].dpmaxz_fbb_mbtn:disabled {color: #bbb;cursor: default;border: 1px solid #e3e3e3;}#dpmaxz_all input[type='button']#dpmaxs_c.dpmaxz_fbb_close {position: absolute;right: 0;width: 42px;margin: 0 12px;padding: 2px 10px;color: #555;background-color:rgba(68,202,255,0);}#dpmaxz_all .dpmaxz_fbb_chk * {font:normal normal normal 12px/18px 'Helvetica Neue',Helvetica,Arial,sans-serif;color:#414141;}#dpmaxz_all .dpmaxz_fbb_chk label {display: block; margin-top:10px;margin-left:60px;}#dpmaxz_all .dpmaxz_fbb_chk span {margin-left:6px;line-height: 20px;vertical-align:middle;color:#414141;}#dpmaxz_all input[type='checkbox']{-ms-transform: scale(1.2); -moz-transform: scale(1.2); -webkit-transform: scale(1.2); -webkit-appearance: checkbox;margin: 0;}#dpmaxz_all .dpmaxz_fbb_shadow {background:url(chrome-extension://pkdnjfgdoolnmiacpdamadcneoblphbj/images/bar-shadow.png) no-repeat scroll 0 0;background-color:transparent;background-size:100% 100%;height:33px;}</style></head>
<body style="background-color: transparent; overflow: hidden;">
<script>

  function _getViewer() {
//    if(document.domain.endsWith('wix.com')) document.domain = 'wix.com';
//    if(document.domain.endsWith("wixsite.com")) document.domain = 'wixsite.com';
    try {//align domain
      var parentDomain = window.parent.parent.document.domain; //test
      window.parent.parent.document.domain = parentDomain; //this needs to be set if the domain was never set (happens on complex domains)
      window.document.domain = parentDomain;
    } catch (e) {
      //failed on parent domain, swich to higher level domain and try again
      var originalDomain = window.document.domain;
      var parentDomain;
      try {
        parentDomain = originalDomain.replace(originalDomain.split('.')[0] + '.', '');
        window.document.domain = parentDomain;
        if (window.document.domain !== window.parent.parent.document.domain) {
          console.log('asdk - domains do not match. me: ' + window.document.domain + ' parent ' + window.parent.parent.document.domain);
        }
      } catch (e) {
        //failed on parent domain again, we are probably on subdomain, swich to higher level domain and try again
        var originalDomain = parentDomain;
        try {
          parentDomain = originalDomain.replace(originalDomain.split('.')[0] + '.', '');
          window.document.domain = parentDomain;
          if (window.document.domain !== window.parent.parent.document.domain) {
            console.log('asdk - domains do not match. me: ' + window.document.domain + ' parent ' + window.parent.parent.document.domain);
          }
        } catch (e) {
          console.log('asdk - failed to match domain to ' + parentDomain + ' back to ' + originalDomain);
          window.document.domain = originalDomain;//no go, back to original
        }
      }
    }
    return window.parent.parent;
  }

  function _setAttribute(comp, propName, propValue) {
    if (!comp.getAttribute(propName + "_o")) comp.setAttribute(propName + "_o", comp.getAttribute(propName));
    comp.setAttribute(propName, propValue);
  }

  function _restoreAttribute(comp, propName) {
    if (comp.getAttribute(propName + "_o")) {
      comp.setAttribute(propName, comp.getAttribute(propName + "_o"));
      comp.removeAttribute(propName + "_o");
    }
  }

  function _setWidgetHeight(viewer, compId, heightNum) {
    viewer.postMessage('{"intent":"TPA2","callId":0,"type":"heightChanged","compId":"' + compId + '","deviceType":"mobile","data":{"height":' + heightNum + ',"version":"1.67.0"}}',"*");
  }



  var setWidgetFullScreenHandler = null;
  function setWidgetFullScreen(compId, bgColor, isFullScreen) {
    var viewer = _getViewer();
    if (isFullScreen) {
      if (!setWidgetFullScreenHandler) {
        //add setTimeout to prevent santa patcher to resize the widget on window resize after our fix to the height (bug fix for ios with floating safari controls)
        setWidgetFullScreenHandler = function() { _setWidgetFullScreen(viewer, compId, bgColor, isFullScreen); };
      }
      viewer.addEventListener('resize', setWidgetFullScreenHandler);
    } else {
      if (setWidgetFullScreenHandler) {
        viewer.removeEventListener('resize', setWidgetFullScreenHandler);
        setWidgetFullScreenHandler = null;
      }
    }
    return _setWidgetFullScreen(viewer, compId, bgColor, isFullScreen);
  }

  function _setWidgetFullScreen(viewer, compId, bgColor, isFullScreen) {

    var fDoc = viewer.document;
    var comp = fDoc.getElementById(compId).childNodes[0];

    var width = "320px";
    var heightNum = fDoc.body.getBoundingClientRect().height;
    var height = "" + (heightNum) + "px";

    if (comp) {
      setTimeout(function(){
        //sometimes on ios setting the height to the exact size of the screen is not working - so first send -1
        _setWidgetHeight(viewer, compId, (heightNum - 1));
        _setWidgetHeight(viewer, compId, heightNum);
      }, 1000);
      setTimeout(function(){
        _setWidgetHeight(viewer, compId, (heightNum - 1));
        _setWidgetHeight(viewer, compId, heightNum);
      }, 2000);
      setTimeout(function(){
        _setWidgetHeight(viewer, compId, heightNum);
      }, 3000);

      if (isFullScreen) {
        fDoc.body.classList.add('fullScreenMode', 'fullScreenMode-scrollable');
        console.log('asdk setHeight of comp Id to', compId, height);
        _setAttribute(comp, 'style', 'position: fixed; top: 0; left: 0px; width: 100%;height:100%;z-index: 1004; background-color: ' + bgColor + ';'); //z-index 1004 to be bellow the lightbox (1005)
        _setAttribute(comp, 'width', width);
        _setAttribute(comp, 'height', height);
        _setAttribute(comp.parentNode, 'style', 'position: fixed; top: 0; left: undefined; width: ' + width + ';height: ' + height + ';z-index: 1004; background-color: ' + bgColor + ';');
      } else {
        fDoc.body.classList.remove('fullScreenMode', 'fullScreenMode-scrollable');
        _restoreAttribute(comp, 'style');
        _restoreAttribute(comp, 'width');
        _restoreAttribute(comp, 'height');
        _restoreAttribute(comp.parentNode, 'style');
      }
    } else {
      console.error("Component " + compId + "Not found");
    }
  }

  var setWidgetFixedOnBottomHandler = null;
  function setWidgetFixedOnBottom(compId, isEnabled, height) {
    var viewer = _getViewer();
    if (isEnabled) {
      //add setTimeout to prevent santa patcher to resize the widget on window resize after our fix to the height (bug fix for ios with floating safari controls)
      if (setWidgetFixedOnBottomHandler) {
        viewer.removeEventListener('resize', setWidgetFixedOnBottomHandler);
      }
      setWidgetFixedOnBottomHandler = function() { _setWidgetFixedOnBottom(viewer, compId, isEnabled, height); };
      viewer.addEventListener('resize', setWidgetFixedOnBottomHandler);
    } else {
      if (setWidgetFixedOnBottomHandler) {
        viewer.removeEventListener('resize', setWidgetFixedOnBottomHandler);
        setWidgetFixedOnBottomHandler = null;
      }
    }
    return _setWidgetFixedOnBottom(viewer, compId, isEnabled, height);
  }

  function _createClassIfNeeded(fDoc, styleId, styleItem) {
    if (!fDoc.getElementById(styleId)) {
      var style = fDoc.createElement('style');
      style.type = 'text/css';
      style.id = styleId;
      style.innerHTML = styleItem;
      fDoc.head.appendChild(style);
      //console.log('style added ' + i + ' on ' + fDoc.location.origin + fDoc.location.pathname)
    } else {
      //console.log('style exists ' + i + ' on ' + fDoc.location.origin + fDoc.location.pathname)
    }
  }

  function _setWidgetFixedOnBottom(viewer, compId, isEnabled, heightNum) {

    var fDoc = viewer.document;
    var comp = fDoc.getElementById(compId).childNodes[0];
    var widthNum = fDoc.body.getBoundingClientRect().width;
    var width = "" + (widthNum) + "px";
    var height = "" + (heightNum) + "px";

    if (comp) {
      if (isEnabled) {
        _createClassIfNeeded(fDoc, 'widget-on-bottom', '.topAuto { top: auto !important; }');
        console.log('asdk _setWidgetFixedOnBottom of comp Id to', compId, height);
        _setAttribute(comp, 'style', 'position: fixed; bottom: 0; left: 0; right: 0; width: 100%;height:' + height + ';z-index: 1004; transform: translateZ(0);');
        _setAttribute(comp, 'width', width);
        _setAttribute(comp, 'height', height);
        _setAttribute(comp.parentNode, 'style', 'position: fixed; bottom: 0; left: 0; right: 0; width: ' + width + ';height: ' + height + ';z-index: 1004;');
        comp.parentNode.classList.add('topAuto');
      } else {
        _restoreAttribute(comp, 'style');
        _restoreAttribute(comp, 'width');
        _restoreAttribute(comp, 'height');
        _restoreAttribute(comp.parentNode, 'style');
        comp.parentNode.classList.remove('topAuto');
      }
    } else {
      console.error("Component " + compId + "Not found");
    }
  }

  ///this should be removed - too generic
  function setWidgetCss(compId, setChildCss, css) {
      try {
		  var document = _getViewer().document;
          var fDoc = setChildCss ?  document.childNodes[0] : document;
          var comp = fDoc.getElementById(compId);

          for (var attr in css) {
              if (css.hasOwnProperty(attr)) {
                  comp.style[attr] = css[attr];
              }
          }
      } catch (e) {
         console.error('Could not set Css for Widget', compId, css)
      }
  }

  // Null content = revert to last value
  function setViewportContent(content) {
	  var document = _getViewer().document;
	  var meta = document.getElementById('wixMobileViewport');

	  // We'll save a stack of all the past values, so system can pass
	  // null in a sequence and go back the tree
	  var oldValueStackJson = meta.getAttribute('__prev_content') || "[]";
	  var oldValueStack = JSON.parse(oldValueStackJson);

	  if (content === null) {
		  if (oldValueStack.length === 0) return;
		  content = oldValueStack.pop();
	  } else {
		  var prev = meta.getAttribute('content');
		  oldValueStack.push(prev);
	  }

	  meta.setAttribute('content', content);
	  meta.setAttribute('__prev_content', JSON.stringify(oldValueStack));
  }

  window.onmessage = function (e) {
      if(e.data) {
        try{
          var msg = JSON.parse(e.data);
          console.log('on message: ', msg);
          if(msg.method === 'setWidgetFullScreen') {
            setWidgetFullScreen(msg.compId, msg.bgColor, msg.isFullScreen);
          } else if(msg.method === 'setWidgetFixedOnBottom') {
            setWidgetFixedOnBottom(msg.compId, msg.isEnabled, msg.height);
          } else if(msg.method === 'setWidgetCss') {
            setWidgetCss(msg.compId, msg.setChildCss, msg.css);
          } else if(msg.method === 'setViewportContent') {
            setViewportContent(msg.content);
          } else {
            console.error('Unsupported method', msg);
          }

        }catch(err) {
          console.error('Failed to execute ', err, e);
        }
      }
  };

</script>




</body></html>